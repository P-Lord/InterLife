# 数据库原理详解，拯救你的期末考试四部曲【四】：数据库设计



## 第七章

### 一、数据库设计概述

#### 1、数据库设计

**定义**：对于一个**给定的应用环境**，构造优化的**数据库逻辑模式和物理结构**，并据此**建立数据库以及其应用系统**，使之能够有效地**存储和管理数据**，**满足各**种用户的**应用需求**。

**设计方法的发展**：手工设计法→规范设计法（新奥尔良法）→基于E-R模型的数据库设计方法、3NF（第三范式）的设计方法、面向对象的设计方法、统一建模语言（UML）方法、计算机辅助设计法和自动化设计法

**数据库设计的六个阶段**：

- 需求分析
- 概念结构设计
- 逻辑结构设计
- 物理结构设计
- 数据库实施
- 数据库运行和维护

![image-20210604212036307](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604212036307.png)



### 二、需求分析

#### 1、任务

**定义**：详细调查现实世界要处理的对象，充分了解原系统，明确用户的各种需求，在此基础上确定系统的功能并要考虑到系统今后可能的扩充和改变。

**调查的重点**：数据和处理

通过调查、收集和分析，得出**用户对数据库的要求**：

- 信息要求
- 处理要求
- 安全性和完整性要求

**调查用户需求的具体步骤**：

- 调查组织机构的情况
- 调查各部门的业务活动情况
- 在熟悉业务活动的基础上，协助用户明确对新系统的各种要求
- 确定新系统的边界

**调查难度与解决**：用户缺乏计算机知识，难以准确表达自己的需求，要深入交流，逐步确定。

### 2、方法

- 跟班作业：亲自体会业务活动
- 开调查会：通过会议了解
- 请专人介绍
- 询问
- 设计调查表请用户填写
- 查阅记录



#### 3、数据字典

**定义**：数据字典是关于数据库中的数据描述，即元数据，而不是数据本身。数据字典在需求分析阶段建立，在数据库设计过程中不断完善。

数据字典通常包括数据项、数据结构、数据流、数据存储和处理，其中数据项是数据的最小组成单位。

##### ① 数据项

![image-20210604214012761](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214012761.png)

##### ② 数据结构

![image-20210604214037490](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214037490.png)

##### ③ 数据流

![image-20210604214055803](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214055803.png)

##### ④ 数据存储

![image-20210604214114605](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214114605.png)

##### ⑤ 处理过程

![image-20210604214139441](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214139441.png)





### 三、概念结构设计

#### 1、概念模型

**特点**:

- 真实充分反映现实世界
- 易于理解、更改
- 易于向关系、网状、层次等数据模型转换

**描述概念模型的工具**：E-R模型



#### 2、E-R模型

![image-20210604214308325](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214308325.png)

![image-20210604214330589](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214330589.png)

![image-20210604214345877](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214345877.png)

#### 3、E-R模型实例

![image-20210604214428705](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214428705.png)

![image-20210604214438796](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214438796.png)

#### 4、<font color=#plzky47>E-R图构建方法</font>

![image-20210604214540980](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214540980.png)

![image-20210604214550954](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214550954.png)

![image-20210604214606652](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214606652.png)

![image-20210604214621514](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214621514.png)

#### 5、E-R图构建重点

![image-20210604214717990](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214717990.png)

![image-20210604214726959](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214726959.png)

![image-20210604214740198](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214740198.png)

![image-20210604214751874](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214751874.png)

![image-20210604214806128](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214806128.png)

#### 6、E-R图的集成

**分为两步：合并、修改和重构**

![image-20210604214933494](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214933494.png)

![image-20210604214942867](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214942867.png)

![image-20210604214948528](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214948528.png)

![image-20210604214959906](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604214959906.png)

![image-20210604215031501](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215031501.png)



### 四、逻辑结构设计

#### 1、E-R图向关系模型的转换

##### ① 转换内容

![image-20210604215052938](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215052938.png)

![image-20210604215108668](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215108668.png)



##### ② 转换的原则

![image-20210604215125087](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215125087.png)



##### ③ 具体转换方法

![image-20210604215136042](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215136042.png)

![image-20210604215318008](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215318008.png)

![image-20210604215335143](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215335143.png)

![image-20210604215345287](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215345287.png)

![image-20210604215354935](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215354935.png)

![image-20210604215402782](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215402782.png)

#### 2、数据模型的优化

![image-20210604215438173](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215438173.png)

![image-20210604215453802](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215453802.png)

![image-20210604215502323](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215502323.png)

![image-20210604215509281](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215509281.png)

![image-20210604215516433](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215516433.png)

![image-20210604215524038](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215524038.png)

![image-20210604215530138](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215530138.png)

#### 3、设计用户子模式

![image-20210604215545145](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215545145.png)

![image-20210604215550543](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215550543.png)

![image-20210604215558391](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215558391.png)

![image-20210604215606086](C:\Users\官二的磊子\Desktop\未来村村长\image-20210604215606086.png)