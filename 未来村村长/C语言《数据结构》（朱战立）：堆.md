## C语言《数据结构》（朱战立）：堆

堆实际上是一个 完全二叉树的层次序列 ，可以用数组存储。
堆中储存的数是局部有序的，从逻辑角度看，堆实际上是一种树型结构

- 结点的值与其孩子结点的值之间存在某种联系。

- 堆中任何一个结点与其兄弟之间都没有必然的联系。

  

### 一、小顶堆（最小堆）

![image-20210702211428531](C:\Users\官二的磊子\Desktop\未来村村长\图片\image-20210702211428531.png)

#### 1、下滑调整法

![image-20210702211604262](C:\Users\官二的磊子\Desktop\未来村村长\图片\image-20210702211604262.png)

![image-20210702211615515](C:\Users\官二的磊子\Desktop\未来村村长\图片\image-20210702211615515.png)

#### 2、建堆

 做法1：

- 从完全二叉树的最后一个分支结点heap[n/2-1]开始，自下层向上层自右向左逐步地采用自上而下的下滑调整法把以各分支结点为根的子树调整成堆。

做法2：

- 从空堆开始，将值一个个地插入堆中，逐步通过（自底向上的）的上滑调整法把当前序列调整为堆。

建堆的时间代价为O(n)

#### 3、堆的删除

做法：
（1）用堆的最后一个结点填补堆顶元素
（2）由于堆被破坏，因此需要调用下滑调整法向下调整



### 二、最大堆





### 三、堆排序

![image-20210702212308735](C:\Users\官二的磊子\Desktop\未来村村长\图片\image-20210702212308735.png)

![image-20210702212316297](C:\Users\官二的磊子\Desktop\未来村村长\图片\image-20210702212316297.png)

```c
void HeapSort(DataType x[ ],int n)
/*用堆排序法对记录x[0]~x[n-1]排序。HeapAdjustDown2()把
HeapAdjustDown()中“heap[j].key<heap[j+1].key” 与
“temp.key>heap[j].key” 的大于号改为小于号*/
{ int i; DataType temp;
for(i=n/2-1;i>=0;i--) /*将x[0]~x[n-1]建成初始的大顶堆*/
HeapAdjustDown2(x, n, i); //使x[i]~x[n-1]成为一个最大堆
for(i=n-1;i>0;i--)
{ /*交换堆顶记录与当前未经排序子序列的最后一个
记录x[i]的位置*/
swap(x,0,i);
HeapAdjustDown2 (x, i, 0); /*重新调整x[0]，使记录
x[0]~x[i-1]成为大顶堆*/
}
} 
```

![image-20210702212417929](C:\Users\官二的磊子\Desktop\未来村村长\图片\image-20210702212417929.png)

![image-20210702212429497](C:\Users\官二的磊子\Desktop\未来村村长\图片\image-20210702212429497.png)